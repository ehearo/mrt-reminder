import{d as e,x as a,e as t,q as l,s,c as o,p as n,a as i,y as r,z as u,A as c,v,F as d,r as m,o as f,f as p}from"./vendor.cVHWZysA.js";import{d as x,f as y,g}from"./index.DZ_vYiJZ.js";import{M as w,_ as h}from"./layout.B6MpoImT.js";import{a as b,_ as j}from"./components.BUqBmoeO.js";const C={class:"page-container safe-area"},S={class:"page-content"},k={class:"mb-6 relative"},L={key:0,class:"mb-6"},V={key:1,class:"space-y-3"},_={key:2,class:"text-center py-12"},F={key:3,class:"text-center py-12"},I=e({__name:"HomeView",setup(e){const I=a(""),T=a([]),U=a(""),q=x(),z=t((()=>{const e=U.value.toLowerCase().trim();return e?T.value.filter((a=>a.StationName.toLowerCase().includes(e)||a.StationCode.toLowerCase().includes(e))):T.value})),A=t((()=>{const e=q.find((e=>e.id===I.value));return(null==e?void 0:e.color)||"#000000"}));async function handleLineSelect(e){I.value=e,T.value=await y(e),U.value=""}let H;return l((()=>{H=window.setInterval((()=>{T.value.length>0&&(T.value=[...T.value])}),3e4)})),s((()=>{H&&window.clearInterval(H)})),(e,a)=>(f(),o("div",C,[n(w),i("main",S,[i("div",k,[r(i("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>U.value=e),type:"text",placeholder:"    \u641c\u5c0b\u7ad9\u9ede",class:"input pl-14 pr-12 placeholder:pl-1"},null,512),[[u,U.value]]),a[4]||(a[4]=i("div",{class:"absolute left-5 top-0 bottom-0 flex items-center justify-center w-4"},[i("i",{class:"fas fa-search text-gray-400"})],-1)),U.value?(f(),o("button",{key:0,onClick:a[1]||(a[1]=e=>U.value=""),class:"absolute right-4 top-0 bottom-0 flex items-center justify-center w-8"},a[3]||(a[3]=[i("i",{class:"fas fa-times text-gray-400 hover:text-gray-600"},null,-1)]))):c("",!0)]),U.value?c("",!0):(f(),o("div",L,[n(b,{lines:v(q),modelValue:I.value,"onUpdate:modelValue":a[2]||(a[2]=e=>I.value=e),onSelect:handleLineSelect},null,8,["lines","modelValue"])])),I.value?(f(),o("div",V,[(f(!0),o(d,null,m(z.value,(e=>(f(),p(j,{key:e.StationCode,station:e,"line-color":A.value,"next-trains":v(g)(e.StationCode),onToggleFavorite:a=>{e.StationCode}},null,8,["station","line-color","next-trains","onToggleFavorite"])))),128))])):U.value&&!z.value.length?(f(),o("div",_,a[5]||(a[5]=[i("div",{class:"bg-white rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},[i("i",{class:"fas fa-search text-2xl text-gray-400"})],-1),i("p",{class:"text-gray-500"},"\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ad9\u9ede",-1)]))):(f(),o("div",F,a[6]||(a[6]=[i("div",{class:"bg-white rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},[i("i",{class:"fas fa-subway text-2xl text-gray-400"})],-1),i("p",{class:"text-gray-500"},"\u8acb\u9078\u64c7\u6377\u904b\u8def\u7dda\u4ee5\u67e5\u770b\u5373\u6642\u8cc7\u8a0a",-1)])))]),n(h)]))}});export{I as _};
