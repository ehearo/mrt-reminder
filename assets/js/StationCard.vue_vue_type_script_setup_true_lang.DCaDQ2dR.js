import{A as t,d as a,k as s,o as e,c as i,b as o,g as n,t as r,m as l,n as c,F as v,e as d}from"./vendor.BCoZ0JB6.js";const f=t("favorite",{state:()=>function(){try{const t=localStorage.getItem("favorites"),a=localStorage.getItem("favoriteStations"),s=t?JSON.parse(t):[],e=a?JSON.parse(a):[];return{favoriteStations:new Set(s),stations:e}}catch(t){return{favoriteStations:new Set,stations:[]}}}(),getters:{getFavoriteStations(){return this.stations.filter((t=>this.favoriteStations.has(t.StationCode)))},isFavorite(){return t=>this.favoriteStations.has(t)}},actions:{toggleFavorite(t){const a=t.StationCode;this.favoriteStations.has(a)?(this.favoriteStations.delete(a),this.stations=this.stations.filter((t=>t.StationCode!==a))):(this.favoriteStations.add(a),this.stations.find((t=>t.StationCode===a))||this.stations.push(t)),this.saveToStorage()},updateStation(t){const a=this.stations.findIndex((a=>a.StationCode===t.StationCode));a>=0&&(this.stations[a]=t,this.saveToStorage())},saveToStorage(){try{const t=Array.from(this.favoriteStations);localStorage.setItem("favorites",JSON.stringify(t)),localStorage.setItem("favoriteStations",JSON.stringify(this.stations))}catch(t){}},clearFavorites(){this.favoriteStations.clear(),this.stations=[],localStorage.removeItem("favorites"),localStorage.removeItem("favoriteStations")}}}),S={class:"card p-4"},g={class:"flex justify-between items-start"},u={class:"flex-1"},m={class:"flex items-center gap-3 mb-2"},h={class:"flex items-center gap-2"},x={class:"font-medium"},p={class:"mt-3 pt-3 border-t border-gray-100"},y={class:"grid grid-cols-3 gap-4 text-sm text-gray-500"},C={class:"text-xs"},T={class:"truncate"},b=a({__name:"StationCard",props:{station:{},lineColor:{},nextTrains:{}},setup(t){const a=t,b=f(),w=s((()=>b.isFavorite(a.station.StationCode)));function F(){b.toggleFavorite(a.station)}const I=s((()=>{var t;return"即將到站"===(null==(t=a.nextTrains[0])?void 0:t.arrivalTime)})),N=s((()=>{if(!a.nextTrains.length)return"目前無班次";const t=a.nextTrains[0];return`往${t.destination} - ${t.arrivalTime}`}));return(t,a)=>(e(),i("div",S,[o("div",g,[o("div",u,[o("div",m,[o("div",{class:"w-2 h-2 rounded-full",style:n({backgroundColor:t.station.LineColor||t.lineColor})},null,4),o("div",h,[o("h3",x,r(t.station.StationName),1),t.station.LineName?(e(),i("span",{key:0,class:"text-sm px-2 py-0.5 rounded-full text-white",style:n({backgroundColor:t.station.LineColor||t.lineColor})},r(t.station.LineName),5)):l("",!0)])]),o("div",{class:c(["flex items-center gap-2 text-sm",{"text-green-600":I.value}])},[a[0]||(a[0]=o("i",{class:"fas fa-train"},null,-1)),o("span",null,r(N.value),1)],2)]),o("button",{class:c(["p-2 transition-colors",w.value?"text-yellow-500":"text-gray-400 hover:text-yellow-500"]),onClick:F},a[1]||(a[1]=[o("i",{class:"fas fa-star"},null,-1)]),2)]),o("div",p,[o("div",y,[(e(!0),i(v,null,d(t.nextTrains,(t=>(e(),i("div",{key:t.Time},[o("div",C,r(t.Time),1),o("div",T,"往"+r(t.destination),1)])))),128))])])]))}});export{b as _,f as u};
